<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Item - Circuit Auction API</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
      body { padding-top: 70px; background-color: #f8f9fa; }
      .navbar-brand { font-weight: bold; }
      .main-content { padding: 2rem; }
      pre { background: #f4f4f4; padding: 1rem; border-radius: 0.375rem; position: relative; }
      .copy-btn { position: absolute; top: 0.5rem; right: 0.5rem; font-size: 0.8rem; }
      .endpoint { font-family: 'Courier New', monospace; background: #e9ecef; padding: 0.2rem 0.4rem; border-radius: 0.25rem; }
      .badge-method { font-size: 0.7em; padding: 0.3em 0.6em; }
      .param-table th { background-color: #f8f9fa; }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="../index.html">Circuit Auction API</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="list.html">Items</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container main-content">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="../index.html">API</a></li>
      <li class="breadcrumb-item"><a href="list.html">Items</a></li>
      <li class="breadcrumb-item active">Create Item</li>
    </ol>
  </nav>

  <h1>Create Item</h1>
  <p class="lead">Create a new auction item/lot with descriptions, images, pricing, and technical details.</p>

  <div class="alert alert-info">
    <h5><i class="fas fa-info-circle"></i> Sale Context Required</h5>
    <p class="mb-0">Items require a sale context. Include <code>sale_id</code> parameter in the query string.</p>
  </div>

  <div class="card mb-4">
    <div class="card-header">
      <span class="badge bg-primary badge-method">POST</span>
      <code class="endpoint">/datatable-items?sale_id={sale_id}</code>
    </div>
    <div class="card-body">

      <h5>Basic Information</h5>
      <div class="table-responsive">
        <table class="table table-sm param-table">
          <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><code>subtitle</code></td>
            <td>string</td>
            <td>Item subtitle</td>
          </tr>
          <tr>
            <td><code>published</code></td>
            <td>boolean</td>
            <td>Publication status (0 or 1)</td>
          </tr>
          <tr>
            <td><code>type</code></td>
            <td>string</td>
            <td>Item type</td>
          </tr>
          <tr>
            <td><code>collectible_type</code></td>
            <td>integer</td>
            <td>Collectible type term ID</td>
          </tr>
          <tr>
            <td><code>grade</code></td>
            <td>string</td>
            <td>Item grade/condition</td>
          </tr>
          <tr>
            <td><code>consignment</code></td>
            <td>integer</td>
            <td>Consignment node ID (required)</td>
          </tr>
          <tr>
            <td><code>uuid</code></td>
            <td>string</td>
            <td>Unique identifier</td>
          </tr>
          <tr>
            <td><code>year</code></td>
            <td>integer</td>
            <td>Year of item</td>
          </tr>
          <tr>
            <td><code>country</code></td>
            <td>integer/string</td>
            <td>Country term ID or label</td>
          </tr>
          </tbody>
        </table>
      </div>

      <h5 class="mt-4">Descriptions & Content</h5>
      <div class="table-responsive">
        <table class="table table-sm param-table">
          <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><code>description</code></td>
            <td>string</td>
            <td>Main item description (HTML)</td>
          </tr>
          <tr>
            <td><code>footer</code></td>
            <td>string</td>
            <td>Footer text</td>
          </tr>
          <tr>
            <td><code>caption</code></td>
            <td>string</td>
            <td>Item caption</td>
          </tr>
          <tr>
            <td><code>literature</code></td>
            <td>string</td>
            <td>Literature references</td>
          </tr>
          <tr>
            <td><code>essay</code></td>
            <td>string</td>
            <td>Essay/detailed description</td>
          </tr>
          <tr>
            <td><code>provenance</code></td>
            <td>string</td>
            <td>Provenance information</td>
          </tr>
          <tr>
            <td><code>ex</code></td>
            <td>string</td>
            <td>Ex collection information</td>
          </tr>
          </tbody>
        </table>
      </div>

      <h5 class="mt-4">Organization & Categorization</h5>
      <div class="table-responsive">
        <table class="table table-sm param-table">
          <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><code>categories</code></td>
            <td>array</td>
            <td>Array of category term IDs or labels</td>
          </tr>
          <tr>
            <td><code>destinations</code></td>
            <td>array</td>
            <td>Array of destination term IDs or labels</td>
          </tr>
          <tr>
            <td><code>search_tags</code></td>
            <td>array</td>
            <td>Array of search tag term IDs or labels</td>
          </tr>
          <tr>
            <td><code>catalogue_parts</code></td>
            <td>array</td>
            <td>Array of catalogue part term IDs or labels</td>
          </tr>
          <tr>
            <td><code>postal_thematics</code></td>
            <td>array</td>
            <td>Array of postal thematic term IDs or labels</td>
          </tr>
          <tr>
            <td><code>symbols</code></td>
            <td>array</td>
            <td>Array of symbol term IDs or labels</td>
          </tr>
          <tr>
            <td><code>sub_symbol</code></td>
            <td>array</td>
            <td>Array of sub-symbol term IDs or labels</td>
          </tr>
          <tr>
            <td><code>grouping_category</code></td>
            <td>array</td>
            <td>Array of grouping category term IDs or labels</td>
          </tr>
          <tr>
            <td><code>topics</code></td>
            <td>array</td>
            <td>Array of topic term IDs or labels</td>
          </tr>
          <tr>
            <td><code>tags</code></td>
            <td>array</td>
            <td>Array of tag term IDs or labels</td>
          </tr>
          <tr>
            <td><code>mediums</code></td>
            <td>array</td>
            <td>Array of medium term IDs or labels</td>
          </tr>
          </tbody>
        </table>
      </div>

      <h5 class="mt-4">Pricing & Bidding</h5>
      <div class="table-responsive">
        <table class="table table-sm param-table">
          <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><code>opening_price</code></td>
            <td>integer</td>
            <td>Opening bid price (in cents)</td>
          </tr>
          <tr>
            <td><code>minimum_price</code></td>
            <td>integer</td>
            <td>Minimum acceptable price (in cents)</td>
          </tr>
          <tr>
            <td><code>buy_now_price</code></td>
            <td>integer</td>
            <td>Buy now price (in cents)</td>
          </tr>
          <tr>
            <td><code>buy_now_setting</code></td>
            <td>string</td>
            <td>Buy now configuration</td>
          </tr>
          <tr>
            <td><code>estimate_low</code></td>
            <td>integer</td>
            <td>Low estimate (in cents)</td>
          </tr>
          <tr>
            <td><code>estimate_high</code></td>
            <td>integer</td>
            <td>High estimate (in cents)</td>
          </tr>
          <tr>
            <td><code>estimate_internal</code></td>
            <td>integer</td>
            <td>Internal estimate (in cents)</td>
          </tr>
          <tr>
            <td><code>retail_price</code></td>
            <td>integer</td>
            <td>Retail price (in cents)</td>
          </tr>
          <tr>
            <td><code>reserve_price</code></td>
            <td>integer</td>
            <td>Reserve price (in cents)</td>
          </tr>
          <tr>
            <td><code>reserve_type</code></td>
            <td>string</td>
            <td>Reserve type setting</td>
          </tr>
          </tbody>
        </table>
      </div>

      <h5 class="mt-4">Images & Media</h5>
      <div class="table-responsive">
        <table class="table table-sm param-table">
          <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><code>images</code></td>
            <td>array</td>
            <td>Array of file IDs (optimized - doesn't resave if unchanged)</td>
          </tr>
          <tr>
            <td><code>video_url</code></td>
            <td>string</td>
            <td>Video URL</td>
          </tr>
          <tr>
            <td><code>pdf_url</code></td>
            <td>string</td>
            <td>PDF document URL</td>
          </tr>
          <tr>
            <td><code>certificate_link</code></td>
            <td>string</td>
            <td>Certificate/authentication link</td>
          </tr>
          <tr>
            <td><code>reference_link</code></td>
            <td>string</td>
            <td>Reference link</td>
          </tr>
          </tbody>
        </table>
      </div>

      <h5 class="mt-4">Technical Details</h5>
      <div class="table-responsive">
        <table class="table table-sm param-table">
          <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><code>catalogs</code></td>
            <td>array</td>
            <td>Catalog references (multifield). See structure below.</td>
          </tr>
          <tr>
            <td><code>dimensions</code></td>
            <td>array</td>
            <td>Dimensions and packaging (multifield). See structure below.</td>
          </tr>
          <tr>
            <td><code>product_tax_code</code></td>
            <td>string</td>
            <td>Product tax code</td>
          </tr>
          <tr>
            <td><code>harmonized_code</code></td>
            <td>string</td>
            <td>Harmonized tariff code</td>
          </tr>
          <tr>
            <td><code>signed_locations</code></td>
            <td>string</td>
            <td>Signature locations</td>
          </tr>
          <tr>
            <td><code>art_work_type</code></td>
            <td>string</td>
            <td>Artwork type classification</td>
          </tr>
          </tbody>
        </table>
      </div>

      <h5 class="mt-4">Lot & Positioning</h5>
      <div class="table-responsive">
        <table class="table table-sm param-table">
          <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><code>lot_number</code></td>
            <td>integer</td>
            <td>Lot number</td>
          </tr>
          <tr>
            <td><code>lot_letter</code></td>
            <td>string</td>
            <td>Lot letter suffix</td>
          </tr>
          <tr>
            <td><code>position_of_consignment</code></td>
            <td>integer</td>
            <td>Position within consignment (unsigned)</td>
          </tr>
          <tr>
            <td><code>start_lot_numbering_at</code></td>
            <td>integer</td>
            <td>Starting lot number</td>
          </tr>
          </tbody>
        </table>
      </div>

      <h5 class="mt-4">Additional Information</h5>
      <div class="table-responsive">
        <table class="table table-sm param-table">
          <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><code>shipping_id</code></td>
            <td>integer</td>
            <td>Shipping ID</td>
          </tr>
          <tr>
            <td><code>post_sale</code></td>
            <td>boolean</td>
            <td>Include in post-sale processing</td>
          </tr>
          <tr>
            <td><code>consignor_reference_number</code></td>
            <td>string</td>
            <td>Consignor's reference number</td>
          </tr>
          <tr>
            <td><code>responsible_user</code></td>
            <td>array</td>
            <td>Array of responsible user IDs</td>
          </tr>
          <tr>
            <td><code>public_message</code></td>
            <td>string</td>
            <td>Public message about item</td>
          </tr>
          <tr>
            <td><code>auctioneer_notes</code></td>
            <td>string</td>
            <td>Internal auctioneer notes</td>
          </tr>
          <tr>
            <td><code>additional_charges</code></td>
            <td>array</td>
            <td>Additional charges (multifield)</td>
          </tr>
          <tr>
            <td><code>dont_pay_consignor_note</code></td>
            <td>string</td>
            <td>Note for not paying consignor</td>
          </tr>
          <tr>
            <td><code>hide_sold_information</code></td>
            <td>boolean</td>
            <td>Hide sold information from public</td>
          </tr>
          <tr>
            <td><code>printing_options</code></td>
            <td>string</td>
            <td>Printing options for catalog</td>
          </tr>
          </tbody>
        </table>
      </div>

      <h5 class="mt-4">Item History Fields (Creates Item History Records)</h5>
      <div class="alert alert-info">
        <p>The following fields create or update Item History records rather than directly updating the item:</p>
      </div>
      <div class="table-responsive">
        <table class="table table-sm param-table">
          <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><code>field_consignor_price</code></td>
            <td>integer</td>
            <td>Price to pay consignor (in cents)</td>
          </tr>
          <tr>
            <td><code>field_dont_pay_consignor</code></td>
            <td>boolean</td>
            <td>Don't pay consignor flag</td>
          </tr>
          <tr>
            <td><code>field_sold_agent</code></td>
            <td>integer</td>
            <td>Selling agent user ID</td>
          </tr>
          <tr>
            <td><code>field_sold_for_amount</code></td>
            <td>integer</td>
            <td>Sold for amount (in cents)</td>
          </tr>
          <tr>
            <td><code>field_sold_to_bidder_id</code></td>
            <td>integer</td>
            <td>Bidder ID who purchased</td>
          </tr>
          <tr>
            <td><code>field_bidder_alias</code></td>
            <td>string</td>
            <td>Bidder alias/paddle number</td>
          </tr>
          <tr>
            <td><code>field_sold_status</code></td>
            <td>string</td>
            <td>Sold status</td>
          </tr>
          <tr>
            <td><code>field_under_extension_status</code></td>
            <td>string</td>
            <td>Extension status</td>
          </tr>
          <tr>
            <td><code>field_winner_bidder</code></td>
            <td>integer</td>
            <td>Winning bidder ID</td>
          </tr>
          <tr>
            <td><code>field_withdrawn</code></td>
            <td>boolean</td>
            <td>Withdrawn from auction</td>
          </tr>
          </tbody>
        </table>
      </div>

      <h5 class="mt-4">Catalogs Structure (Multifield)</h5>
      <pre><code class="language-json">{
  "catalogs": [
    {
      "catalog_number": "S-123",
      "catalog_name": "Scott Standard Postage Stamp Catalogue",
      "ordering_number": 1,
      "catalog_value": 15000
    }
  ]
}</code></pre>

      <h5 class="mt-4">Dimensions Structure (Multifield)</h5>
      <pre><code class="language-json">{
  "dimensions": [
    {
      "number_on_box": "BOX-001",
      "height": 12.5,
      "width": 10.0,
      "depth": 3.5,
      "weight": 2.5,
      "type": "framed",
      "packed_date": 1695945600000
    }
  ]
}</code></pre>

      <h5 class="mt-4">Example Request - Basic Item</h5>
      <pre><code class="language-bash">POST /api/v1.0/datatable-items?sale_id=123</code></pre>
      <pre><code class="language-json">{
  "subtitle": "Rare 1920s Vintage Stamp Collection",
  "consignment": 789,
  "published": 1,
  "description": "<p>Exceptional collection of 1920s European stamps in mint condition.</p>",
  "categories": ["Stamps", "European"],
  "opening_price": 50000,
  "estimate_low": 75000,
  "estimate_high": 125000,
  "lot_number": 45
}</code></pre>

      <h5 class="mt-4">Example Request - Complete Item with Details</h5>
      <pre><code class="language-json">{
  "subtitle": "Original Picasso Lithograph - Signed",
  "consignment": 999,
  "published": 1,
  "type": "artwork",
  "collectible_type": 5,
  "grade": "Excellent",
  "year": 1965,
  "country": "France",
  "description": "<p>Authentic Picasso lithograph from the Blue Period series.</p>",
  "provenance": "Private collection, Paris. Acquired 1967.",
  "ex": "Ex collection: Museum of Modern Art",
  "literature": "Catalogued in Bloch 1234",
  "categories": ["Art", "Prints"],
  "mediums": ["Lithograph"],
  "opening_price": 500000,
  "minimum_price": 450000,
  "estimate_low": 750000,
  "estimate_high": 1000000,
  "reserve_price": 600000,
  "reserve_type": "fixed",
  "lot_number": 150,
  "images": [12345, 12346, 12347],
  "certificate_link": "https://example.com/cert/12345",
  "dimensions": [
    {
      "height": 24.0,
      "width": 18.0,
      "type": "framed",
      "weight": 5.5
    }
  ],
  "catalogs": [
    {
      "catalog_number": "B-1234",
      "catalog_name": "Bloch Catalogue Raisonn√©",
      "catalog_value": 1200000
    }
  ],
  "signed_locations": "Lower right corner",
  "art_work_type": "print",
  "responsible_user": [10],
  "auctioneer_notes": "Handle with white gloves only"
}</code></pre>

      <h5 class="mt-4">Response</h5>
      <pre><code class="language-json">{
  "data": [{
    "id": "5678",
    "display_id": "150",
    "subtitle": "Rare 1920s Vintage Stamp Collection",
    "published": true,
    "lot": "45",
    "consignment": {
      "id": "789",
      "label": "CON-2025-001"
    },
    "opening_price": 50000,
    "estimate_low": 75000,
    "estimate_high": 125000,
    "current_price": 50000,
    "status": {
      "value": "active",
      "label": "Active"
    },
    "created": "2025-12-31T10:00:00Z",
    "updated": "2025-12-31T10:00:00Z"
  }]
}</code></pre>

      <h5 class="mt-4">Notes</h5>
      <ul>
        <li>Items require a <code>sale_id</code> parameter (sale context)</li>
        <li>All monetary values are in cents</li>
        <li>Dates are in milliseconds (JavaScript timestamps)</li>
        <li>Taxonomy terms can be sent as IDs (integers) or labels (strings)</li>
        <li><code>images</code> field accepts array of file IDs - optimized to not resave if unchanged</li>
        <li>Item History fields create separate item_history nodes during POST/PATCH</li>
        <li>Latest Item History is promoted and values are fetched from it on GET</li>
        <li>PATCH with only Item History fields skips parent class validation</li>
        <li><code>position_of_consignment</code> is cast to unsigned integer</li>
        <li>Multifield arrays allow multiple entries for catalogs and dimensions</li>
      </ul>
    </div>
  </div>

  <div class="alert alert-warning">
    <h5><i class="fas fa-exclamation-triangle"></i> Read-Only Fields</h5>
    <p class="mb-0">The following fields are calculated and cannot be set during creation:</p>
    <ul class="mt-2 mb-0">
      <li><code>id</code>, <code>display_id</code>, <code>lot</code> (formatted)</li>
      <li><code>current_price</code>, <code>consignor_price</code> (from Item History)</li>
      <li><code>withdrawn</code>, <code>dont_pay_consignor</code>, <code>winner_bidder</code>, <code>bidder_number</code>, <code>bidder_alias</code> (from IH)</li>
      <li><code>user_agent</code>, <code>sold_status</code> (from IH)</li>
      <li><code>current_order</code>, <code>current_consignment_statement</code> (from IH)</li>
      <li><code>sale</code> (reference from context)</li>
      <li><code>previous_lot</code>, <code>next_lot</code> (navigation)</li>
      <li><code>sync_status</code>, <code>itemWebsiteLink</code> (computed)</li>
    </ul>
  </div>

  <a href="list.html" class="btn btn-outline-secondary">Back to Items</a>
  <a href="../index.html" class="btn btn-outline-secondary">Back to API Home</a>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
<script>
  document.querySelectorAll('pre code').forEach(block => {
    const button = document.createElement('button');
    button.className = 'btn btn-sm btn-outline-secondary copy-btn';
    button.textContent = 'Copy';
    button.onclick = () => {
      navigator.clipboard.writeText(block.textContent);
      button.textContent = 'Copied!';
      setTimeout(() => button.textContent = 'Copy', 2000);
    };
    block.parentElement.appendChild(button);
  });
</script>
</body>
</html>
